<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desaf칤os y Logros</title>

    <link rel="stylesheet" href="assets/css/card_styles.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <style>
        /* Estilos espec칤ficos de la Pantalla de Desaf칤os */
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            text-align: center;
        }

        h2 {
            color: #58a6ff;
            margin-bottom: 30px;
            font-size: 2em;
        }

        #challenges-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Adaptable */
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Estilo de carta de Desaf칤o (Basado en .card pero m치s grande) */
        .challenge-card {
            background-color: #21262d;
            border: 2px solid #484f58;
            border-radius: 12px;
            padding: 15px;
            text-align: left;
            position: relative;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s;
        }
        
        .challenge-card:hover {
            transform: translateY(-5px);
        }

        .challenge-card h3 {
            color: #ff9800; /* Color de T칤tulo del Desaf칤o */
            margin-top: 0;
            font-size: 1.2em;
            border-bottom: 1px solid #484f58;
            padding-bottom: 5px;
        }

        .challenge-status {
            font-weight: bold;
            padding: 5px 8px;
            border-radius: 5px;
            margin-top: 10px;
            display: inline-block;
            font-size: 0.8em;
        }
        
        /* Colores de Estado */
        .status-pending { background-color: #505050; color: #f0f6fc; }
        .status-progress { background-color: #58a6ff; color: #0d1117; }
        .status-completed { background-color: #238636; color: #f0f6fc; }

        .reward-info {
            margin-top: 15px;
            font-size: 0.9em;
            color: #c9d1d9;
        }
        .reward-info strong {
             color: #ffc107;
        }
        
    </style>
</head>
<body>
    <h2>游끥 Desaf칤os y Logros Culinarios</h2>
    <p>Completa desaf칤os para desbloquear nuevos ingredientes y cartas especiales.</p>
    
    <div id="challenges-container">
        <p id="loading-message">Cargando desaf칤os...</p>
    </div>

    <script>
        // *** SIMULACI칍N DE DATOS Y ESTADO DEL JUGADOR ***
        // Nota: En la implementaci칩n real, estos datos deben guardarse en localStorage 
        // o ser parte del estado global de tu aplicaci칩n.
        const CHALLENGES_DB_URL = 'assets/data/challenges_db.json'; // Simulaci칩n de ruta
        const PLAYER_PROGRESS = JSON.parse(localStorage.getItem('playerChallenges')) || {};

        const challengesContainer = document.getElementById('challenges-container');
        const loadingMessage = document.getElementById('loading-message');


        /**
         * Funci칩n principal para cargar y renderizar los desaf칤os.
         */
        async function loadAndRenderChallenges() {
            try {
                // 1. Cargar la base de datos de desaf칤os (Simulaci칩n)
                // Usar fetch real o asumir que 'MENU_DB' o una similar ya carg칩 el JSON.
                // Aqu칤 usamos una simulaci칩n de carga para no depender de otro archivo.
                const response = await fetch('data:application/json;base64,' + btoa(JSON.stringify({ /* Contenido de challenges_db.json aqu칤 */ })));
                const data = await response.json();
                const challenges = data.desafios;

                challengesContainer.innerHTML = '';
                
                // 2. Renderizar cada desaf칤o
                challenges.forEach(challenge => {
                    const progress = PLAYER_PROGRESS[challenge.id] || { completado: false, progreso_actual: 0 };
                    const card = createChallengeCard(challenge, progress);
                    challengesContainer.appendChild(card);
                });

                if (challenges.length === 0) {
                     loadingMessage.textContent = "No hay desaf칤os disponibles en este momento.";
                }

            } catch (error) {
                loadingMessage.style.color = '#dc3545';
                loadingMessage.textContent = `Error al cargar desaf칤os: ${error.message}`;
                console.error("Fallo la carga de Desaf칤os:", error);
            }
        }

        /**
         * Crea el elemento HTML de la tarjeta de desaf칤o.
         */
        function createChallengeCard(challenge, progress) {
            const card = document.createElement('div');
            card.className = 'challenge-card';
            card.dataset.id = challenge.id;

            let statusClass, statusText, progressDetail = '';
            
            if (progress.completado) {
                statusClass = 'status-completed';
                statusText = '<i class="fa-solid fa-check"></i> 춰COMPLETADO!';
            } else if (progress.progreso_actual > 0) {
                statusClass = 'status-progress';
                statusText = 'En Progreso';
                const total = challenge.objetivo.cantidad || challenge.objetivo.dias_totales;
                progressDetail = `<p>Progreso: ${progress.progreso_actual} / ${total}</p>`;
            } else {
                statusClass = 'status-pending';
                statusText = 'Pendiente';
            }
            
            card.innerHTML = `
                <h3>${challenge.nombre}</h3>
                <p>${challenge.descripcion}</p>
                <div class="reward-info">
                    <strong>Recompensa:</strong> ${challenge.recompensa_carta}
                </div>
                ${progressDetail}
                <div class="challenge-status ${statusClass}">${statusText}</div>
            `;

            return card;
        }

        // Simulaci칩n: Iniciar la carga
        document.addEventListener('DOMContentLoaded', () => {
             // 游눠 SIMULACI칍N DE ESTADO INICIAL 游눠
             // Para probar la visualizaci칩n:
             PLAYER_PROGRESS["A001"] = { completado: false, progreso_actual: 1 }; // En progreso
             PLAYER_PROGRESS["B001"] = { completado: true, progreso_actual: 7 };  // Completado
             localStorage.setItem('playerChallenges', JSON.stringify(PLAYER_PROGRESS)); // Guardar estado simulado

            loadAndRenderChallenges();
        });

    </script>
    <script>
        // Cargar el contenido real de challenges_db.json
        // Reemplaza esta simulaci칩n en tu integraci칩n final.
        const challengeDBContent = JSON.parse(atob('eyJkZXNhZmlvcyI6IFt7ImlkIjogIkEwMDEiLCAidGlwbyI6ICJDUkVDSU9OX1BMQVRPIiwgIm5vbWJyZSI6ICJFbCBNYWVzdHJvIFBvbGx1ZWxvIiwgImRlc2NyaXBjaW9uIjogIkNyZWEgMyBQbGF0b3MgVsOhbGlkb3MgcXVlIHV0aWxpY2VuICdQb2xsbycgY29tbyBpbmdyZWRpZW50ZSBwcmluY2lwYWwgZW4gdW5hIHNvbGEgcGFydGlkYSBkZSBDcmVhZG9yIGRlIFBsYXRvcy4iLCAib2JqZXRpdm8iOiB7Im1ldHJpY2EiOiAiaW5ncmVkaWVudGVfcHJpbmNpcGFsX3VzYWRvIiwgImluZ3JlZGllbnRlIjogIlBvbGxvIEFzYWRvIiwgImNhbnRpZGFkIjogMywgInBhcnRpZGFfdW5pY2EiOiB0cnVlfSwgInJlY29tcGVuc2FfbG9ncm8iOiAiTG9ncm86IEVzcGVjaWFsaXN0YSBlbiBBdmVzIiwgInJlY29tcGVuc2FfY2FydGEiOiAiUG9sbG8gUHJlbWl1bSAoQ2FydGEgZGUgSW5ncmVkaWVudGUgbnVldmEpIn0sIHsiaWQiOiAiQTAwMiIsICJ0aXBvIjogIkNSRUVDSU9OX1BMQVRPIiwgIm5vbWJyZSI6ICJGaWVicmUgZGUgUGFzdGEiLCAiZGVzY3JpcGNpb24iOiAiQ3JlYSA0IFBsYXRvcyBWw6FsaWRvcyBxdWUgdXRpbGljZW4gY3VhbHF1aWVyIHRpcG8gZGUgJ1Bhc3RhJyBjb21vIGNhcmJvaGlkcmF0byBhIGxvIGxhcmdvIGRlIGN1YWxxdWllciBudW1lcm8gZGUgcGFydGlkYXMuIiwgIm9iamV0aXZvIjogeyJtZXRyaWNhIjogImNhdGVnb3JpYV91c2FkYSIsICJjYXRlZ29yaWEiOiAiY2FyYm9oaWRyYXRvcyIsICJpbmdyZWRpZW50ZXNfa2V5IjogWyJQYXN0YSBDb3J0YSIsICJQYXN0YSBMYXJnYSJdLCAiY2FudGlkYWQiOiA0LCAicGFydGlkYV91bmljYSI6IGZhbHNlfSwgInJlY29tcGVuc2FfbG9ncm8iOiAiTG9ncm86IFBhc3RhIEFkZGljdCIsICJyZWNvbXBlbnNhX2NhcnRhIjogIlBhc3RhIFJlbGxlbmEgKENhcnRhIGRlIEluZ3JlZGllbnRlIG51ZXZhKSJ9LCB7ImlkIjogIkIwMDEiLCAidGlwbyI6ICJQTEFOSUZJQ0FDSU9OX01FTlUiLCAibm9tYnJlIjogIkRpdmVyc2lkYWQgQWJzb2x1dGEiLCAiZGVzY3JpcGNpb24iOiAiR2VuZXJhIHkgY29uZmlybWEgdW4gTWVuxakgU2VtYW5hbCAoUGFudGFsbGEgMikgY29uIHVuIFBsYXRvIGRpZmVyZW50ZSBjYWRhIGTDrWEgKEx1bmVzIGEgRG9taW5nbykuIiwgIm9iamV0aXZvIjogeyJtZXRyaWNhIjogInBsYXRvc191bmljb3NfZW5fbWVudSIsICJkaWFzX3RvdGFsZXMiOiA3fSwgInJlY29tcGVuc2FfbG9ncm8iOiAiTG9ncm86IEVsIENoZWYgVmVyc2F0aWwiLCAicmVjb21wZW5zYV9jYXJ0YSI6ICJGaWRlbyBkZSBBcnJveiAoQ2FydGEgZGUgSW5ncmVkaWVudGUgbnVldmEpIn0sIHsiaWQiOiAiQjAwMiIsICJ0aXBvIjogIlBMSUFEcnUgTWVuxlUiLCAibm9tYnJlIjogIk1pbmltYWxpc3RhIEVsZWdhbnRlIiwgImRlc2NyaXBjaW9uIjogIkdlbmVyYSB5IGNvbmZpcm1hIHVuIE1lbsO6IFNlbWFuYWwgKFBhbnRhbGxhIDIpIHVzYW5kbyBzb2xvIFBsYXRvcyBxdWUgY29udGVuZ2FuIGV4YWN0YW1lbnRlIDMgaW5ncmVkaWVudGVzIGNsYXZlLiIsICJvYmpldGl2byI6eyJtZXRyaWNhIjogInRvdGFsX2luZ3JlZGllbnRlc19wbGF0byIsICJtYXhfaW5ncmVkaWVudGVzX3Bvcl9wbGF0byI6IDMsICJkaWFzX3RvdGFsZXMiOiA3fSwgInJlY29tcGVuc2FfbG9ncm8iOiAiTG9ncm86IFplbiBkZSBsYSBDb2NpbmEiLCAicmVjb21wZW5zYV9jYXJ0YSI6ICJTYWxzaaSgIFNlY3JldGEgKENhcnRhIFNhesOzbi9Db21vZMSpbiwgcHJvcHVlc3RhKSJ9XX0='));

        // Nota: En la versi칩n final, aseg칰rate de que el script de carga de tu aplicaci칩n
        // (`load_screen.js` o `main.js`) incluya el manejo de la nueva base de datos.
    </script>
</body>
</html>